# Infrastructure
Стеки приложений в инфраструктре Бэкспейса.

## Как работает?
Portainer автоматически подтягивает стеки из этого репозитория для созданных стеков.

Переменные окружения хранятся отдельно от стеков, в файлах `.env`

Сами `.env` шифруются [imcatwhocode/envienc](https://github.com/imcatwhocode/envienc).
Оригинальные файлы игнорируются гитом, коммитятся только зашифрованные версии с расширением
`.envienc`

## Как шифровать/расшифровать?
Нужен Node.js. Ключ шифрования в кейчейне RØ.

```sh
# Установить envienc и зависимости в проект
npm ci

# Расшифровать
npx envienc decrypt -p пароль_из_кейчейна

# Перешифровать
npx envienc encrypt -p пароль_из_кейчейна

```

## Как добавить свой сервис?
To be determined. Пока спроси у кого-нибдуь из рабочей группы по инфраструктуре.
